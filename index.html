<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>StealthText • Invisible Character Converter</title>
    <style>
        :root {
            --bg-primary: #0a0e17;
            --bg-secondary: #111827;
            --bg-card: #1e293b;
            --bg-input: #0f172a;
            --text-primary: #f8fafc;
            --text-secondary: #cbd5e1;
            --text-muted: #94a3b8;
            --accent-primary: #3b82f6;
            --accent-primary-hover: #2563eb;
            --accent-secondary: #8b5cf6;
            --accent-success: #10b981;
            --accent-warning: #f59e0b;
            --accent-danger: #ef4444;
            --border-color: #334155;
            --border-radius: 12px;
            --border-radius-lg: 16px;
            --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.3);
            --shadow-md: 0 10px 20px rgba(0, 0, 0, 0.2);
            --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.15);
            --transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        html, body {
            height: 100%;
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            overflow-x: hidden;
        }

        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            width: 100%;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        /* Header Styles */
        .header {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            padding: 32px 0;
            background: linear-gradient(135deg, var(--bg-secondary) 0%, rgba(30, 41, 59, 0.8) 100%);
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--border-color);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--accent-primary), transparent);
        }

        .logo-container {
            display: flex;
            align-items: center;
            gap: 16px;
            margin-bottom: 16px;
        }

        .logo {
            width: 56px;
            height: 56px;
            border-radius: 14px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: var(--shadow-lg);
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .logo svg {
            width: 28px;
            height: 28px;
            color: white;
        }

        .title-container h1 {
            font-size: 2.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-primary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 8px;
            letter-spacing: -0.5px;
        }

        .title-container .subtitle {
            font-size: 1rem;
            color: var(--text-secondary);
            font-weight: 500;
            max-width: 600px;
            line-height: 1.6;
        }

        /* Main Content */
        .content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            flex: 1;
        }

        @media (max-width: 1024px) {
            .content {
                grid-template-columns: 1fr;
            }
        }

        /* Card Styles */
        .card {
            background: var(--bg-card);
            border-radius: var(--border-radius-lg);
            border: 1px solid var(--border-color);
            padding: 24px;
            transition: var(--transition);
            display: flex;
            flex-direction: column;
            height: fit-content;
        }

        .card:hover {
            border-color: var(--accent-primary);
            box-shadow: var(--shadow-md);
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-primary);
        }

        .card-title svg {
            width: 20px;
            height: 20px;
            color: var(--accent-primary);
        }

        /* Textarea Styles */
        .textarea-container {
            position: relative;
            flex: 1;
            min-height: 300px;
        }

        textarea {
            width: 100%;
            height: 100%;
            min-height: 300px;
            background: var(--bg-input);
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            padding: 20px;
            color: var(--text-primary);
            font-family: 'JetBrains Mono', 'Fira Code', monospace;
            font-size: 14px;
            line-height: 1.6;
            resize: vertical;
            transition: var(--transition);
            outline: none;
        }

        textarea:focus {
            border-color: var(--accent-primary);
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        }

        textarea::placeholder {
            color: var(--text-muted);
        }

        textarea#output {
            background: rgba(15, 23, 42, 0.7);
        }

        /* Stats Bar */
        .stats-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border-color);
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .char-count {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .char-count .value {
            font-weight: 600;
            color: var(--text-primary);
            background: var(--bg-input);
            padding: 4px 12px;
            border-radius: 20px;
            border: 1px solid var(--border-color);
        }

        /* Actions Bar */
        .actions-bar {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
        }

        /* Button Styles */
        .btn {
            padding: 12px 24px;
            border-radius: var(--border-radius);
            border: none;
            font-family: inherit;
            font-size: 0.9375rem;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            min-width: 120px;
        }

        .btn svg {
            width: 16px;
            height: 16px;
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent-primary-hover);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-secondary {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-primary);
            border: 1px solid var(--accent-primary);
        }

        .btn-secondary:hover {
            background: rgba(59, 130, 246, 0.2);
            transform: translateY(-2px);
        }

        .btn-success {
            background: var(--accent-success);
            color: white;
        }

        .btn-success:hover {
            background: #0da271;
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .btn-danger {
            background: var(--accent-danger);
            color: white;
        }

        .btn-danger:hover {
            background: #dc2626;
            transform: translateY(-2px);
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none !important;
        }

        /* Controls Section */
        .controls-section {
            grid-column: 1 / -1;
            margin-top: 8px;
        }

        .controls-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }

        .control-group {
            background: var(--bg-card);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 20px;
            transition: var(--transition);
        }

        .control-group:hover {
            border-color: var(--accent-primary);
        }

        .control-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: var(--text-secondary);
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }

        .control-buttons {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .control-buttons .btn {
            min-width: 100%;
            justify-content: flex-start;
        }

        /* Status Bar */
        .status-bar {
            grid-column: 1 / -1;
            background: var(--bg-card);
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
            padding: 16px 24px;
            display: flex;
            align-items: center;
            gap: 16px;
            margin-top: 8px;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--accent-success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .status-message {
            flex: 1;
            font-size: 0.9375rem;
            color: var(--text-secondary);
        }

        .status-message strong {
            color: var(--text-primary);
            font-weight: 600;
        }

        /* Footer */
        .footer {
            grid-column: 1 / -1;
            text-align: center;
            padding: 24px 0;
            margin-top: 32px;
            border-top: 1px solid var(--border-color);
            color: var(--text-muted);
            font-size: 0.875rem;
        }

        .footer-content {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .footer-links {
            display: flex;
            gap: 24px;
        }

        .footer-links a {
            color: var(--text-secondary);
            text-decoration: none;
            transition: var(--transition);
        }

        .footer-links a:hover {
            color: var(--accent-primary);
        }

        /* Utility Classes */
        .hidden {
            display: none !important;
        }

        .fade-in {
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .shake {
            animation: shake 0.5s ease;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* Tooltip */
        .tooltip {
            position: relative;
            display: inline-block;
        }

        .tooltip .tooltip-text {
            visibility: hidden;
            width: 200px;
            background-color: var(--bg-card);
            color: var(--text-primary);
            text-align: center;
            padding: 8px 12px;
            border-radius: var(--border-radius);
            position: absolute;
            z-index: 1;
            bottom: 125%;
            left: 50%;
            transform: translateX(-50%);
            opacity: 0;
            transition: var(--transition);
            font-size: 0.75rem;
            border: 1px solid var(--border-color);
            box-shadow: var(--shadow-lg);
        }

        .tooltip:hover .tooltip-text {
            visibility: visible;
            opacity: 1;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 12px;
            }
            
            .header {
                padding: 24px 16px;
            }
            
            .title-container h1 {
                font-size: 2rem;
            }
            
            .content {
                gap: 16px;
            }
            
            .card {
                padding: 20px;
            }
            
            .actions-bar {
                justify-content: center;
            }
            
            .btn {
                min-width: calc(50% - 6px);
            }
            
            .footer-content {
                flex-direction: column;
                text-align: center;
            }
        }

        @media (max-width: 480px) {
            .title-container h1 {
                font-size: 1.75rem;
            }
            
            .btn {
                min-width: 100%;
            }
            
            .controls-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header fade-in">
            <div class="logo-container">
                <!-- <div class="logo">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5"/>
                    </svg>
                </div> -->
                <div class="title-container">
                    <h1>Opacify</h1>
                    <!-- <p class="subtitle">Convert text to invisible zero-width characters and back. Perfect for hidden messaging and data encoding.</p> -->
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <div class="content">
            <!-- Input Card -->
            <div class="card fade-in">
                <div class="card-header">
                    <div class="card-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 19V5M5 12l7-7 7 7"/>
                        </svg>
                        <span>Input Text</span>
                    </div>
                    <div class="tooltip">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span class="tooltip-text">Enter text to encode or invisible characters to decode. Press Ctrl+Enter to encode or Shift+Enter to decode.</span>
                    </div>
                </div>
                
                <div class="textarea-container">
                    <textarea id="input" placeholder="Type or paste your text here... Example: Hello, this is a secret message!"></textarea>
                </div>
                
                <div class="stats-bar">
                    <div class="char-count">
                        <span>Characters:</span>
                        <span class="value" id="inputCount">0</span>
                    </div>
                    <div class="char-count">
                        <span>Lines:</span>
                        <span class="value" id="inputLines">1</span>
                    </div>
                </div>
                
                <div class="actions-bar">
                    <button class="btn btn-primary" id="encodeBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 19V5M5 12l7-7 7 7"/>
                        </svg>
                        Encode Text
                    </button>
                    <button class="btn btn-secondary" id="decodeBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M19 12l-7 7-7-7"/>
                        </svg>
                        Decode Text
                    </button>
                    <button class="btn btn-secondary" id="copyInputBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                        </svg>
                        Copy Input
                    </button>
                </div>
            </div>

            <!-- Output Card -->
            <div class="card fade-in">
                <div class="card-header">
                    <div class="card-title">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 5v14M19 12l-7 7-7-7"/>
                        </svg>
                        <span>Output</span>
                    </div>
                    <div class="tooltip">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M12 16v-4M12 8h.01"/>
                        </svg>
                        <span class="tooltip-text">Result appears here. Invisible characters are highlighted when selected.</span>
                    </div>
                </div>
                
                <div class="textarea-container">
                    <textarea id="output" placeholder="Encoded or decoded text will appear here..." readonly></textarea>
                </div>
                
                <div class="stats-bar">
                    <div class="char-count">
                        <span>Characters:</span>
                        <span class="value" id="outputCount">0</span>
                    </div>
                    <div class="char-count">
                        <span>Type:</span>
                        <span class="value" id="outputType">None</span>
                    </div>
                </div>
                
                <div class="actions-bar">
                    <button class="btn btn-success" id="copyOutputBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                        </svg>
                        Copy Output
                    </button>
                    <button class="btn btn-secondary" id="clearOutputBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                        </svg>
                        Clear Output
                    </button>
                    <button class="btn btn-secondary" id="swapBtn">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M7 16V4h12M17 8h4v4M7 8H3V4"/>
                        </svg>
                        Swap
                    </button>
                </div>
            </div>

            <!-- Controls Section -->
            <div class="controls-section fade-in">
                <div class="controls-grid">
                    <div class="control-group">
                        <div class="control-title">Text Actions</div>
                        <div class="control-buttons">
                            <button class="btn btn-secondary" id="clearInputBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/>
                                </svg>
                                Clear Input
                            </button>
                            <button class="btn btn-secondary" id="sampleBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                    <polyline points="14 2 14 8 20 8"/>
                                    <line x1="16" y1="13" x2="8" y2="13"/>
                                    <line x1="16" y1="17" x2="8" y2="17"/>
                                    <polyline points="10 9 9 9 8 9"/>
                                </svg>
                                Load Sample
                            </button>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="control-title">Invisible Characters</div>
                        <div class="control-buttons">
                            <button class="btn btn-secondary" id="showInvisibleBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                    <circle cx="12" cy="12" r="3"/>
                                </svg>
                                Show Invisible
                            </button>
                            <button class="btn btn-secondary" id="testOutputBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>
                                </svg>
                                Test Output
                            </button>
                        </div>
                    </div>
                    
                    <div class="control-group">
                        <div class="control-title">Settings</div>
                        <div class="control-buttons">
                            <button class="btn btn-secondary" id="exportBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="7 10 12 15 17 10"/>
                                    <line x1="12" y1="15" x2="12" y2="3"/>
                                </svg>
                                Export
                            </button>
                            <button class="btn btn-secondary" id="helpBtn">
                                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <circle cx="12" cy="12" r="10"/>
                                    <path d="M12 16v-4M12 8h.01"/>
                                </svg>
                                Help
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Status Bar -->
            <div class="status-bar fade-in">
                <div class="status-indicator"></div>
                <div class="status-message" id="statusMessage">
                    <strong>Ready</strong> - Enter text and click Encode or Decode to begin
                </div>
                <button class="btn btn-secondary" id="quickCopyBtn" style="display: none;">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                        <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                    </svg>
                    Quick Copy
                </button>
            </div>

            <!-- Footer -->
            <footer class="footer">
                <div class="footer-content">
                    <div class="footer-links">
                        <a href="#" id="aboutLink">About</a>
                        <a href="#" id="privacyLink">Privacy</a>
                        <a href="#" id="githubLink">GitHub</a>
                        <a href="#" id="contactLink">Contact</a>
                    </div>
                    <div class="copyright">
                        © 2023 StealthText • Invisible Character Converter • Made with <span style="color: #ef4444;">♥</span>
                    </div>
                    <div class="version">
                        v1.2.0
                    </div>
                </div>
            </footer>
        </div>
    </div>

    <script>
        // Zero-width characters
        const ZERO_WIDTH_SPACE = '\u200B';
        const ZERO_WIDTH_NON_JOINER = '\u200C';
        const ZERO_WIDTH_JOINER = '\u200D';
        const INVISIBLE_CHARS = [ZERO_WIDTH_SPACE, ZERO_WIDTH_NON_JOINER, ZERO_WIDTH_JOINER];
        
        // DOM Elements
        const input = document.getElementById('input');
        const output = document.getElementById('output');
        const inputCount = document.getElementById('inputCount');
        const outputCount = document.getElementById('outputCount');
        const inputLines = document.getElementById('inputLines');
        const outputType = document.getElementById('outputType');
        const statusMessage = document.getElementById('statusMessage');
        const quickCopyBtn = document.getElementById('quickCopyBtn');
        
        // Initialize
        updateStats();
        
        // Update statistics
        function updateStats() {
            inputCount.textContent = input.value.length;
            outputCount.textContent = output.value.length;
            inputLines.textContent = input.value.split('\n').length;
            
            // Determine output type
            const outputText = output.value;
            let type = 'None';
            
            if (outputText.length > 0) {
                const hasInvisible = INVISIBLE_CHARS.some(char => outputText.includes(char));
                type = hasInvisible ? 'Invisible' : 'Visible';
            }
            
            outputType.textContent = type;
            outputType.style.color = type === 'Invisible' ? 'var(--accent-success)' : 'var(--text-primary)';
        }
        
        // Set status message
        function setStatus(message, type = 'info') {
            const colors = {
                info: 'var(--text-secondary)',
                success: 'var(--accent-success)',
                warning: 'var(--accent-warning)',
                error: 'var(--accent-danger)'
            };
            
            statusMessage.innerHTML = `<strong>${type.toUpperCase()}</strong> - ${message}`;
            statusMessage.style.color = colors[type] || colors.info;
            
            // Show quick copy button if output has content
            if (output.value.length > 0) {
                quickCopyBtn.style.display = 'flex';
            } else {
                quickCopyBtn.style.display = 'none';
            }
        }
        
        // Encode text to invisible characters
        function encodeText() {
            const text = input.value.trim();
            
            if (!text) {
                setStatus('Please enter some text to encode', 'warning');
                output.value = '';
                updateStats();
                return;
            }
            
            try {
                // Convert text to binary
                let binaryString = '';
                for (let i = 0; i < text.length; i++) {
                    const binary = text.charCodeAt(i).toString(2).padStart(8, '0');
                    binaryString += binary;
                }
                
                // Convert binary to invisible characters
                let invisibleText = '';
                for (let i = 0; i < binaryString.length; i++) {
                    invisibleText += binaryString[i] === '0' ? ZERO_WIDTH_SPACE : ZERO_WIDTH_JOINER;
                    
                    // Add separator every 8 bits
                    if ((i + 1) % 8 === 0 && i !== binaryString.length - 1) {
                        invisibleText += ZERO_WIDTH_NON_JOINER;
                    }
                }
                
                output.value = invisibleText;
                setStatus(`Encoded ${text.length} characters to ${invisibleText.length} invisible characters`, 'success');
            } catch (error) {
                setStatus('Error encoding text: ' + error.message, 'error');
                console.error(error);
            }
            
            updateStats();
        }
        
        // Decode invisible characters back to text
        function decodeText() {
            const invisibleText = input.value;
            
            if (!invisibleText.trim()) {
                setStatus('Please enter invisible text to decode', 'warning');
                output.value = '';
                updateStats();
                return;
            }
            
            try {
                // Extract binary from invisible characters
                let binaryString = '';
                for (let i = 0; i < invisibleText.length; i++) {
                    const char = invisibleText[i];
                    if (char === ZERO_WIDTH_SPACE) {
                        binaryString += '0';
                    } else if (char === ZERO_WIDTH_JOINER) {
                        binaryString += '1';
                    }
                    // Ignore separators
                }
                
                // Convert binary to text
                let decodedText = '';
                for (let i = 0; i < binaryString.length; i += 8) {
                    const byte = binaryString.substring(i, i + 8);
                    if (byte.length === 8) {
                        const charCode = parseInt(byte, 2);
                        decodedText += String.fromCharCode(charCode);
                    }
                }
                
                if (decodedText) {
                    output.value = decodedText;
                    setStatus(`Decoded ${decodedText.length} characters from invisible text`, 'success');
                } else {
                    setStatus('No valid invisible text detected', 'warning');
                }
            } catch (error) {
                setStatus('Error decoding text: ' + error.message, 'error');
                console.error(error);
            }
            
            updateStats();
        }
        
        // Copy text to clipboard
        async function copyToClipboard(text, elementName) {
            if (!text.trim()) {
                setStatus(`No ${elementName} text to copy`, 'warning');
                return;
            }
            
            try {
                await navigator.clipboard.writeText(text);
                setStatus(`Copied ${elementName} to clipboard`, 'success');
                
                // Visual feedback
                const btn = event?.target.closest('.btn');
                if (btn) {
                    const originalBg = btn.style.background;
                    btn.style.background = 'var(--accent-success)';
                    setTimeout(() => {
                        btn.style.background = originalBg;
                    }, 300);
                }
            } catch (err) {
                setStatus('Failed to copy to clipboard', 'error');
                console.error(err);
            }
        }
        
        // Swap input and output
        function swapText() {
            if (!output.value.trim() && !input.value.trim()) {
                setStatus('Both fields are empty', 'warning');
                return;
            }
            
            [input.value, output.value] = [output.value, input.value];
            setStatus('Swapped input and output', 'info');
            updateStats();
        }
        
        // Show invisible characters (replace with visible markers)
        function showInvisible() {
            let text = output.value;
            if (!text.trim()) {
                text = input.value;
                if (!text.trim()) {
                    setStatus('No text to show invisible characters for', 'warning');
                    return;
                }
            }
            
            // Replace invisible characters with visible markers
            let visibleText = text
                .replace(new RegExp(ZERO_WIDTH_SPACE, 'g'), '[ZWSP]')
                .replace(new RegExp(ZERO_WIDTH_NON_JOINER, 'g'), '[ZWJ]')
                .replace(new RegExp(ZERO_WIDTH_JOINER, 'g'), '[ZWNJ]');
            
            output.value = visibleText;
            setStatus('Showing invisible characters as visible markers', 'info');
            updateStats();
        }
        
        // Test output by copying and pasting
        function testOutput() {
            if (!output.value.trim()) {
                setStatus('No output to test', 'warning');
                return;
            }
            
            const testInput = document.createElement('textarea');
            testInput.value = output.value;
            document.body.appendChild(testInput);
            testInput.select();
            document.execCommand('copy');
            document.body.removeChild(testInput);
            
            setStatus('Output copied for testing. Try pasting into another app.', 'info');
        }
        
        // Load sample text
        function loadSample() {
            const samples = [
                "This is a secret message that will be encoded!",
                "Zero-width characters are invisible but carry data.",
                "Encode this text to see how invisible characters work.",
                "Hidden messages can be embedded in plain text."
            ];
            
            const randomSample = samples[Math.floor(Math.random() * samples.length)];
            input.value = randomSample;
            
            setStatus('Loaded sample text', 'info');
            updateStats();
        }
        
        // Clear input field
        function clearInput() {
            input.value = '';
            setStatus('Input cleared', 'info');
            updateStats();
            input.focus();
        }
        
        // Clear output field
        function clearOutput() {
            output.value = '';
            setStatus('Output cleared', 'info');
            updateStats();
        }
        
        // Export functionality
        function exportText() {
            if (!output.value.trim()) {
                setStatus('No output to export', 'warning');
                return;
            }
            
            const blob = new Blob([output.value], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'stealthtext-export.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            setStatus('Exported as text file', 'success');
        }
        
        // Show help
        function showHelp() {
            const helpText = `HOW TO USE:
1. Enter text in the Input field
2. Click "Encode Text" to convert to invisible characters
3. Click "Decode Text" to convert invisible characters back to text
4. Use "Copy Output" to copy the result
5. Try "Show Invisible" to see invisible characters as markers

KEYBOARD SHORTCUTS:
Ctrl+Enter - Encode text
Shift+Enter - Decode text
Ctrl+C - Copy selected text
Ctrl+A - Select all text`;
            
            output.value = helpText;
            setStatus('Help guide loaded', 'info');
            updateStats();
        }
        
        // Event Listeners
        document.getElementById('encodeBtn').addEventListener('click', encodeText);
        document.getElementById('decodeBtn').addEventListener('click', decodeText);
        document.getElementById('copyInputBtn').addEventListener('click', () => copyToClipboard(input.value, 'input'));
        document.getElementById('copyOutputBtn').addEventListener('click', () => copyToClipboard(output.value, 'output'));
        document.getElementById('quickCopyBtn').addEventListener('click', () => copyToClipboard(output.value, 'output'));
        document.getElementById('clearInputBtn').addEventListener('click', clearInput);
        document.getElementById('clearOutputBtn').addEventListener('click', clearOutput);
        document.getElementById('swapBtn').addEventListener('click', swapText);
        document.getElementById('showInvisibleBtn').addEventListener('click', showInvisible);
        document.getElementById('testOutputBtn').addEventListener('click', testOutput);
        document.getElementById('sampleBtn').addEventListener('click', loadSample);
        document.getElementById('exportBtn').addEventListener('click', exportText);
        document.getElementById('helpBtn').addEventListener('click', showHelp);
        
        // Footer links
        document.getElementById('aboutLink').addEventListener('click', (e) => {
            e.preventDefault();
            setStatus('StealthText - Invisible Character Converter v1.2.0', 'info');
        });
        
        document.getElementById('githubLink').addEventListener('click', (e) => {
            e.preventDefault();
            setStatus('GitHub repository: github.com/thisizasif/stealthtext', 'info');
        });
        
        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
                encodeText();
                e.preventDefault();
            }
            
            if (e.shiftKey && e.key === 'Enter') {
                decodeText();
                e.preventDefault();
            }
            
            if ((e.ctrlKey || e.metaKey) && e.key === 'l') {
                clearInput();
                e.preventDefault();
            }
        });
        
        // Update stats on input
        input.addEventListener('input', updateStats);
        output.addEventListener('input', updateStats);
        
        // Auto-encode sample text on load
        window.addEventListener('load', () => {
            setTimeout(() => {
                encodeText();
                setStatus('Ready - Sample text encoded. Try decoding or entering your own text.', 'success');
            }, 500);
        });
        
        // Initialize tooltips
        document.querySelectorAll('.tooltip').forEach(el => {
            el.addEventListener('mouseenter', () => {
                el.classList.add('fade-in');
            });
        });
    </script>
</body>
</html>
